import  org.junit.AfterClass;
import  org.junit.BeforeClass;
import  org.junit.Before;
import  org.junit.Test;
import static org.junit.Assert.*;
import  java.util.Map;
import  io.restassured.RestAssured;
import static io.restassured.RestAssured.given;
import  io.restassured.response.ValidatableResponse;
import static org.evomaster.client.java.controller.api.EMTestUtils.*;
import  org.evomaster.client.java.controller.SutHandler;
import static org.evomaster.client.java.controller.db.dsl.SqlDsl.sql;
import  org.evomaster.client.java.controller.api.dto.database.operations.InsertionResultsDto;
import  org.evomaster.client.java.controller.api.dto.database.operations.InsertionDto;
import  java.util.List;
import static org.hamcrest.Matchers.*;
import  io.restassured.config.JsonConfig;
import  io.restassured.path.json.config.JsonPathConfig;
import static io.restassured.config.RedirectConfig.redirectConfig;
import static org.evomaster.client.java.controller.contentMatchers.NumberMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.StringMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.SubStringMatcher.*;
import static org.evomaster.client.java.controller.expect.ExpectationHandler.expectationHandler;
import  org.evomaster.client.java.controller.expect.ExpectationHandler;
import  io.restassured.path.json.JsonPath;
import  java.util.Arrays;




/**
 * This file was automatically generated by EvoMaster on 2023-04-26T21:03:45.406003+05:30[Asia/Kolkata]
 * <br>
 * The generated test suite contains 2 tests
 * <br>
 * Covered targets: 7
 * <br>
 * Used time: 0h 1m 1s
 * <br>
 * Needed budget for current results: 96%
 * <br>
 * This file contains one example of each category of fault. The test cases in this file are a subset of the set of test cases likely to indicate faults.
 */
public class EvoMaster_fault_representatives_Test {

    
    private static String baseUrlOfSut = "https://carapi.app";
    /** [ems] - expectations master switch - is the variable that activates/deactivates expectations individual test cases
    * by default, expectations are turned off. The variable needs to be set to [true] to enable expectations
    */
    private static boolean ems = false;
    /**
    * sco - supported code oracle - checking that the response status code is among those supported according to the schema
    */
    private static boolean sco = false;
    /**
    * rso - response structure oracle - checking that the response objects match the responses defined in the schema
    */
    private static boolean rso = false;
    
    
    @BeforeClass
    public static void initClass() {
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
        RestAssured.useRelaxedHTTPSValidation();
        RestAssured.urlEncodingEnabled = false;
        RestAssured.config = RestAssured.config()
            .jsonConfig(JsonConfig.jsonConfig().numberReturnType(JsonPathConfig.NumberReturnType.DOUBLE))
            .redirect(redirectConfig().followRedirects(false));
    }
    
    
    
    
    
    
    
    
    @Test(timeout = 60000)
    public void test_0() throws Exception {
        ExpectationHandler expectationHandler = expectationHandler();
        
        ValidatableResponse res_0 = given().accept("*/*")
                .contentType("application/json")
                .body(" { " + 
                    " \"api_token\": \"vjl9MEaGDOOwgT\", " + 
                    " \"api_secret\": \"A3g_\" " + 
                    " } ")
                .post(baseUrlOfSut + "/api/auth/login")
                .then()
                .statusCode(401)
                .assertThat()
                .contentType("text/html");
        
        expectationHandler.expect(ems)
            .that(sco, Arrays.asList(200).contains(res_0.extract().statusCode()));
        
        given().accept("application/json")
                .get(baseUrlOfSut + "/api/trims/398")
                .then()
                .statusCode(200)
                .assertThat()
                .contentType("application/json")
                .body("'make_model_id'", numberMatches(70.0))
                .body("'year'", numberMatches(2023.0))
                .body("'name'", containsString("************** (hidden)"))
                .body("'description'", containsString("***************************************************************************** (hidden)"))
                .body("'msrp'", numberMatches(41500.0))
                .body("'invoice'", numberMatches(38380.0))
                .body("'created'", containsString("2022-08-30T22:19:56-04:00"))
                .body("'modified'", containsString("2022-08-30T22:19:56-04:00"))
                .body("'make_model_trim_interior_colors'.size()", equalTo(1))
                .body("'make_model_trim_interior_colors'", hasItems("... (colors hidden)"))
                .body("'make_model_trim_exterior_colors'.size()", equalTo(1))
                .body("'make_model_trim_exterior_colors'", hasItems("... (colors hidden)"))
                .body("'make_model_trim_mileage'.'make_model_trim_id'", numberMatches(398.0))
                .body("'make_model_trim_mileage'.'fuel_tank_capacity'", containsString("9.5"))
                .body("'make_model_trim_mileage'.'combined_mpg'", nullValue())
                .body("'make_model_trim_mileage'.'epa_city_mpg'", nullValue())
                .body("'make_model_trim_mileage'.'epa_highway_mpg'", nullValue())
                .body("'make_model_trim_mileage'.'range_city'", numberMatches(0.0))
                .body("'make_model_trim_mileage'.'range_highway'", numberMatches(0.0))
                .body("'make_model_trim_engine'.'make_model_trim_id'", numberMatches(398.0))
                .body("'make_model_trim_engine'.'engine_type'", containsString("*** (engine type hidden)"))
                .body("'make_model_trim_engine'.'fuel_type'", containsString("*** (fuel_type hidden)"))
                .body("'make_model_trim_engine'.'cylinders'", containsString("*** (cylinders hidden)"))
                .body("'make_model_trim_engine'.'size'", containsString("5.0"))
                .body("'make_model_trim_engine'.'horsepower_hp'", numberMatches(221.0))
                .body("'make_model_trim_engine'.'horsepower_rpm'", nullValue())
                .body("'make_model_trim_engine'.'torque_ft_lbs'", numberMatches(284.0))
                .body("'make_model_trim_engine'.'torque_rpm'", numberMatches(1300.0))
                .body("'make_model_trim_engine'.'valves'", numberMatches(12.0))
                .body("'make_model_trim_engine'.'valve_timing'", containsString("*** (valve_timing hidden)"))
                .body("'make_model_trim_engine'.'cam_type'", containsString("*** (cam_type hidden)"))
                .body("'make_model_trim_engine'.'drive_type'", containsString("*** (drive_type hidden)"))
                .body("'make_model_trim_engine'.'transmission'", containsString("*** (transmission hidden)"))
                .body("'make_model_trim_body'.'make_model_trim_id'", numberMatches(398.0))
                .body("'make_model_trim_body'.'type'", containsString("*** (body type hidden)"))
                .body("'make_model_trim_body'.'doors'", numberMatches(5.0))
                .body("'make_model_trim_body'.'length'", containsString("169.8"))
                .body("'make_model_trim_body'.'width'", containsString("71.7"))
                .body("'make_model_trim_body'.'seats'", numberMatches(5.0))
                .body("'make_model_trim_body'.'height'", containsString("61.4"))
                .body("'make_model_trim_body'.'wheel_base'", containsString("105.1"))
                .body("'make_model_trim_body'.'front_track'", nullValue())
                .body("'make_model_trim_body'.'rear_track'", nullValue())
                .body("'make_model_trim_body'.'ground_clearance'", containsString("5.8"))
                .body("'make_model_trim_body'.'cargo_capacity'", containsString("17.0"))
                .body("'make_model_trim_body'.'max_cargo_capacity'", containsString("47.0"))
                .body("'make_model_trim_body'.'curb_weight'", numberMatches(3926.0))
                .body("'make_model_trim_body'.'gross_weight'", numberMatches(5016.0))
                .body("'make_model_trim_body'.'max_payload'", numberMatches(950.0))
                .body("'make_model_trim_body'.'max_towing_capacity'", nullValue())
                .body("'make_model'.'make_id'", numberMatches(17.0))
                .body("'make_model'.'name'", containsString("********** (hidden)"))
                .body("'make_model'.'make'.'name'", containsString("MINI"))
                .body("'__message'", containsString("NOTE: Data is limited to `2020` for non-paying users. Search for 2020 vehicles or subscribe to unlock this data."));
        
    }
    
    
    @Test(timeout = 60000)
    public void test_1() throws Exception {
        ExpectationHandler expectationHandler = expectationHandler();
        
        ValidatableResponse res_0 = given().accept("application/json")
                .get(baseUrlOfSut + "/api/vehicle-attributes?attribute=engines.valves")
                .then()
                .statusCode(200)
                .assertThat()
                .contentType("application/json")
                .body("size()", equalTo(12))
                .body("[0]", numberMatches(8.0))
                .body("[1]", numberMatches(12.0))
                .body("[2]", numberMatches(16.0))
                ; // Skipping assertions on the remaining 9 elements. This limit of 3 elements can be increased in the configurations
        
        expectationHandler.expect(ems);
        
        ValidatableResponse res_1 = given().accept("*/*")
                .contentType("application/json")
                .body(" { " + 
                    " \"api_token\": \"MY0LlLKHc\", " + 
                    " \"api_secret\": \"Ox3jzEH\" " + 
                    " } ")
                .post(baseUrlOfSut + "/api/auth/login")
                .then()
                .statusCode(401)
                .assertThat()
                .contentType("text/html");
        
        expectationHandler.expect(ems)
            .that(sco, Arrays.asList(200).contains(res_1.extract().statusCode()));
    }


}
